# HTTP Method

- 클라이언트에서 서버로 요청할 때의 데이터 전달 방식

## GET

> 요청 URL(HTTP Header)에 데이터를 붙여 전송 (얻기)

- 내가 A라고 보내니까 A와 관련된 정보를 나에게 보내줘
- 요청 URL 길이에 제한이 있음
- 전송 데이터 노출에 따른 위험 존재

![GET](./img/get.png)

**[특징]**
- GET 요청은 캐시 가능. 즉, 클라이언트나 프록시와 같은 중간 서버에서 GET 요청의 응답을 저장해두었다가 동일한 요청이 다시 들어올 때 서버에 다시 요청을 보내지 않고 저장된 응답을 동일하게 재사용한다는 의미
- 브라우저 히스토리에 남음
- 북마크 될 수 있음

## POST

> HTTP Body에 데이터를 담아서 전송 (보내기)

- 서버야 A에 대한 정보를 줄테니 잘 받아
- 데이터 전송 길이에 대한 제한이 없음
- HTTP Request Body에 데이터를 담아 노출이 안됨

![POST](./img/post.png)

**[특징]**
- POST 요청은 캐시 불가능
- 브라우저 히스토리에 남지 않음
- 북마크 되지 않음

## GET vs POST

||GET|POST|
|:------:|:---:|:---:|
|사용목적|서버에 데이터 요청|서버에 데이터를 생성 혹은 업데이트|
|Body 유무|X|O|
|멱등성|O|X|
|DB 비유|SELECT|INSERT <br> UPDATE|

__멱등성이란?__

- 사전적 정의 : 연산을 여러 번 적용해도 결과가 달라지지 않는 성질
- GET은 데이터를 "조회"하는 목적이기 때문에 여러 번 요청하더라도 같은 응답이 돌아옴
- POST는 데이터를 새로 생성하거나 업데이트하는 목적이기 때문에 다른 응답이 돌아올 수 있음

## QnA

_1. POST는 GET 방식보다 보안에서 유리하다?_
- Body에 들어있는 정보 또한 공유기나 PC에서 중간에 가로채 확인할 수 있음
- 따라서 암호화 프로토콜을 추가해 HTTPs 사용

<br>

_2. GET과 POST 둘 중 하나만 쓰면 안되나?_
- POST 방식을 이용한다면, 더 많은 데이터를 담을 수 있고 직접적인 데이터 노출도 되지 않는데 왜 GET을 사용하지?
- GET 방식은 간단하며 캐시를 사용할 수 있기 때문에 데이터 조회를 빠르게 수행할 수 있지만, 큰 용량의 데이터 전송 어려움
- POST는 높고 큰 용량의 데이터를 전송할 수 있지만 캐시를 이용할 수 없으며 **더 무거운 처리 필요**

즉, 동일한 요청에 대해 동일한 결과를 보여줄 때에는 로직상 GET 방식이 더 이득이기 때문에 목적에 따라 GET과 POST를 적절히 사용해야 함

## (+) PUT vs PATCH

### PUT

- 자원의 전체 교체
- 교체시 모든 속성 필요함. 만약 전체 속성이 아닌 일부 속성만 전달할 경우 전달한 필드 외 나머지는 모두 NULL 이나 초기값으로 처리됨

### PATCH

- 자원의 부분 교체
- 교체시 일부 속성 필요함


### UPDATE 요청 예시 ①

||PUT|PATCH|
|:------:|:---:|:---:|
|원본|{"name" : "김철수", "age": 18 }|
|요청|{"age": 20}|{"age": 20}|
|결과|{"name" : null, "age": 20}|{"name" : "김철수", "age": 20}|

### UPDATE 요청 예시 ②

현재 서버에 id 1, 2, 3인 유저가 존재하고 id 4인 유저에 대해 아래와 같은 요청을 보낸다면?

||PUT|PATCH|
|:------:|:---:|:---:|
|요청|{"name" : "김철수", "age": 18 }|
|결과|{"name" : "김철수", "age": 18 }|Error|

즉, 요청 리소스가 존재하지 않을 때 PUT은 새로운 자원을 생성하지만 PATCH는 오류를 반환함